function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var a=0;a<n.length;a++){var l=n[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,n,a){return n&&_defineProperties(e.prototype,n),a&&_defineProperties(e,a),e}function Sun(e,n){this.x=400,this.y=0}function Enemy(e,n,a,l){this.x=e,this.y=n,this.direction=l,this.style=a}!function(){var a={},l=[];function n(e){if(a[e])return a[e];var n=new Image;n.onload=function(){a[e]=n,t()&&l.forEach(function(e){e()})},a[e]=!1,n.src=e}function t(){var e=!0;for(var n in a)a.hasOwnProperty(n)&&!a[n]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(e){return a[e]},onReady:function(e){l.push(e)},isReady:t}}();var enemy1Speed=.6,enemy2Speed=.9,enemy3Speed=1.4,lives=3,level=0,levelDisplay=document.getElementById("score").firstElementChild,livesDisplay=document.getElementById("lives").firstElementChild;Enemy.prototype.update=function(e){allEnemies[0].x<=0&&(allEnemies[0].direction="ltr"),allEnemies[1].x<=0&&(allEnemies[1].direction="ltr"),allEnemies[2].x<=0&&(allEnemies[2].direction="ltr"),800<=allEnemies[0].x&&(allEnemies[0].direction="rtl"),800<=allEnemies[1].x&&(allEnemies[1].direction="rtl"),800<=allEnemies[2].x&&(allEnemies[2].direction="rtl"),"rtl"===allEnemies[0].direction?allEnemies[0].x-=enemy1Speed:allEnemies[0].x+=enemy1Speed,"rtl"===allEnemies[1].direction?allEnemies[1].x-=enemy2Speed:allEnemies[1].x+=enemy2Speed,"rtl"===allEnemies[2].direction?allEnemies[2].x-=enemy3Speed:allEnemies[2].x+=enemy3Speed,player.x<this.x+85&&player.x+85>this.x&&player.y<this.y+85&&player.y+85>this.y&&(player.x=400,player.y=400,allEnemies[0].x=0,allEnemies[0].y=0,allEnemies[1].x=0,allEnemies[1].y=100,allEnemies[2].x=0,allEnemies[2].y=200,lives--),0===lives&&(alert("You lose. You made it to level ".concat(level,".")),level=0,lives=3,enemy1Speed=.6,enemy2Speed=.9,enemy3Speed=1.4),levelDisplay.textContent=level,livesDisplay.textContent=lives};var allowedKeys={37:"left",38:"up",39:"right",40:"down"};document.addEventListener("keyup",function(e){player.handleInput(allowedKeys[e.keyCode])});var Player=function(){function a(e,n){_classCallCheck(this,a),this.x=e,this.y=n}return _createClass(a,[{key:"update",value:function(){this.x<sun.x+85&&this.x+85>sun.x&&this.y<sun.y+85&&this.y+85>sun.y&&(level++,player.x=400,player.y=400,enemy1Speed+=.4,enemy2Speed+=.45,enemy3Speed+=.2)}},{key:"handleInput",value:function(e){0<player.x&&e===allowedKeys[37]&&(player.x-=50),0<player.y&&e===allowedKeys[38]&&(player.y-=50),player.x<800&&e===allowedKeys[39]&&(player.x+=50),player.y<450&&e===allowedKeys[40]&&(player.y+=50)}}]),a}(),allEnemies=[new Enemy(0,0,"enemy1","ltr"),new Enemy(0,100,"enemy2","ltr"),new Enemy(0,200,"enemy3","ltr")],sun=new Sun(0,0),player=new Player(400,400),Engine=function(e){e.document;var n,a=e.window,l=document.getElementById("canvas"),t=l.getContext("2d");function r(){var e=Date.now();(function(n){allEnemies.forEach(function(e){e.update(n)}),player.update()})((e-n)/1e3),t.clearRect(0,0,l.width,l.height),t.drawImage(Resources.get("images/background.png"),0,0),function(){t.drawImage(Resources.get("images/sun.png"),sun.x,sun.y),player.tickCount++,player.tickCount>player.ticksPerFrame&&(player.tickCount=0,player.frameIndex++);player.frameIndex>=player.numberOfFrames&&(player.frameIndex=0);var e=Resources.get("images/player.png");t.drawImage(e,0,player.frameIndex*e.naturalHeight/player.numberOfFrames,e.naturalWidth,e.naturalHeight/player.numberOfFrames,player.x,player.y,e.naturalWidth,e.naturalHeight/player.numberOfFrames),allEnemies.forEach(function(e){e.tickCount++,e.tickCount>e.ticksPerFrame&&(e.tickCount=0,e.frameIndex++),e.frameIndex>=e.numberOfFrames&&(e.frameIndex=0);var n=Resources.get("images/".concat(e.style,"-").concat(e.direction,".png"));t.drawImage(n,0,e.frameIndex*n.naturalHeight/e.numberOfFrames,n.naturalWidth,n.naturalHeight/e.numberOfFrames,e.x,e.y,n.naturalWidth,n.naturalHeight/e.numberOfFrames)})}(),n=e,a.requestAnimationFrame(r)}l.width=900,l.height=534,Resources.load(["images/background.png","images/enemy1-ltr.png","images/enemy2-ltr.png","images/enemy3-ltr.png","images/enemy1-rtl.png","images/enemy2-rtl.png","images/enemy3-rtl.png","images/enemy4-rtl.png","images/enemy4-ltr.png","images/sun.png","images/player.png"]),Resources.onReady(function(){allEnemies.forEach(function(e){e.tickCount=0,e.ticksPerFrame=5,e.frameIndex=0,e.numberOfFrames=3}),player.tickCount=0,player.ticksPerFrame=5,player.frameIndex=0,player.numberOfFrames=2,n=Date.now(),r()}),e.ctx=t}(this);